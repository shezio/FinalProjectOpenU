# הוראות הכנת נתוני משפחות לייבוא למערכת "חיוך של ילד"

## סיכום הנתונים

**קובץ מקור:** רישום משפחות - חיוך של ילד.xlsx  
**גיליון:** משפחות רשומות חדש  
**סה״כ שורות עם נתונים:** 501 משפחות

---

## 🔴 חשוב מאוד - אופן הכנסת נתונים

### המערכת מאפשרת הכנסה ידנית דרך טופס

בניגוד למתנדבים, **ניתן להכניס משפחות ישירות דרך ממשק המערכת** ללא צורך באימות TOTP.
כל משפחה מוכנסת ידנית דרך דף "משפחות" במערכת.

---

## 📊 סיכום מצב הנתונים הנוכחי

### סוגי רשומות:
| סוג | כמות |
|-----|------|
| משפחה | 356 |
| בוגר/ת | 146 |

### סטטוס רפואי:
| סטטוס | כמות |
|-------|------|
| מחלים/בריא | 305 |
| טיפולים | 130 |
| אחזקה | 47 |
| מעקבים | 19 |

### מצב חונכות:
| מצב | כמות |
|-----|------|
| לא רלוונטי | 319 |
| לא רוצים | 127 |
| למצוא חונך | 22 |
| יש חונך | 20 |
| אחר | 14 |

---

## ⚠️ בעיות שצריך לתקן לפני הייבוא

### סיכום בעיות:
| בעיה | כמות רשומות |
|------|-------------|
| טלפון חסר | 223 |
| חסר 0 בתחילת טלפון | 157 |
| בית חולים חסר | 64 |
| טלפון עם תווים לא תקינים | 22 |
| ת.ז לא תקינה (לא 9 ספרות) | 14 |
| תאריך לידה חסר | 4 |
| ת.ז חסרה | 3 |
| עיר חסרה | 2 |
| **רשומות תקינות לחלוטין** | **183** |

---

### בעיה 1: מספרי טלפון חסרים (223 רשומות)

**מה לעשות:**
- לצורך הייבוא הראשוני - ניתן להשתמש בטלפון ההורים
- או לרשום ערך זמני כמו "0000000000" ולעדכן בהמשך

---

### בעיה 2: מספרי טלפון חסרים 0 בהתחלה (157 רשומות)

**הסבר:** מספרים נשמרו כמספר ולא כטקסט

**דוגמה:**
- ❌ שגוי: `523613465` (9 ספרות)
- ✅ נכון: `0523613465` (10 ספרות)

**איך לתקן:**
1. הוסיפו עמודה חדשה
2. כתבו נוסחה: `=IF(LEN(K2)=9,"0"&K2,K2)` (K = עמודת הטלפון)
3. גררו למטה
4. העתיקו כ"ערכים בלבד" חזרה לעמודה המקורית

---

### בעיה 3: ת.ז לא תקינה (14 רשומות)

**בעיות שנמצאו:**
- ת.ז עם 7-8 ספרות במקום 9
- דוגמאות: `2174500`, `24697496`, `25354085`

**מה לעשות:**
- ת.ז חייבת להיות **9 ספרות בדיוק**
- אם הת.ז קצרה - הוסיפו אפסים בהתחלה
- דוגמה: `24697496` → `024697496`

**בדיקת תקינות ת.ז:**
1. סננו את עמודה R (תעודת זהות ילד/ה)
2. חפשו ערכים עם פחות מ-9 ספרות
3. השלימו אפסים בהתחלה לפי הצורך

---

### בעיה 4: בית חולים חסר (64 רשומות)

**מה לעשות:**
1. סננו את עמודה L (בית חולים מטפל) לפי ריקות
2. צרו קשר עם המשפחה או בדקו ברשומות אחרות
3. אם לא ידוע - כתבו "לא ידוע"

---

### בעיה 5: תאריך לידה חסר (4 רשומות)

**מה לעשות:**
1. סננו את עמודה S (תאריך לידה) לפי ריקות
2. השלימו את התאריך בפורמט: DD/MM/YYYY
3. המערכת דורשת גיל בין 0-30

---

## 📋 התאמת עמודות למערכת

| עמודה באקסל | שדה במערכת | שדה טכני | הערות |
|-------------|------------|----------|-------|
| תעודת זהות ילד/ה | ת.ז ילד | child_id | **9 ספרות בדיוק**, חובה |
| שם מלא של הילד/ה | שם פרטי + משפחה | childfirstname + childsurname | צריך לפצל |
| מין | מין | gender | "בת" = True, "בן" = False |
| עיר | עיר | city | חובה, מהרשימה הקבועה |
| רחוב ומס׳ דירה | כתובת | street_and_apartment_number | חובה |
| מספר טלפון של הילד/ה | טלפון ילד | child_phone_number | 10 ספרות, חובה |
| בית חולים מטפל | בית חולים | treating_hospital | חובה, מהרשימה הקבועה |
| תאריך לידה | תאריך לידה | date_of_birth | חובה, גיל 0-30 |
| אבחנה רפואית | אבחנה | medical_diagnosis | אופציונלי |
| תאריך אבחון | תאריך אבחון | diagnosis_date | אופציונלי |
| מצב רפואי עדכני | מצב רפואי | current_medical_state | אופציונלי |
| האם סיים/ה טיפולים? | סיים טיפולים | has_completed_treatments | כן/לא |
| מתי סיים/ה טיפולים? | מתי סיים | when_completed_treatments | אם סיים - תאריך |
| צפי סיום על פי פרוטוקול? | צפי סיום | expected_end_treatment_by_protocol | אם לא סיים |
| סטטוס זוגי | מצב משפחתי | marital_status | חובה - ראו המרה למטה |
| כמה אחים יש? | מספר אחים | num_of_siblings | חובה, מספר |
| שם האב | שם אב | father_name | אופציונלי |
| מס' טלפון של האב | טלפון אב | father_phone | אופציונלי |
| שם האם | שם אם | mother_name | אופציונלי |
| מס' טלפון של האם | טלפון אם | mother_phone | אופציונלי |
| מצב חונכות | מצב חונכות | tutoring_status | חובה - ראו המרה למטה |
| פרטים לצורך חונכות | פרטים לחונכות | details_for_tutoring | אם רלוונטי |
| סטטוס | סטטוס משפחה | status | חובה - ראו המרה למטה |
| האם יש משהו ספציפי... | מידע נוסף | additional_info | אופציונלי |
| תאריך רישום | תאריך רישום | registrationdate | המערכת מוסיפה אוטומטית |

---

## 🔄 המרת ערכים

### מין → gender:
| באקסל | במערכת |
|--------|---------|
| בת | נקבה (True) |
| בן | זכר (False) |

### סטטוס → status:
| באקסל | במערכת |
|--------|---------|
| טיפולים | טיפולים |
| מעקבים | מעקבים |
| אחזקה | אחזקה |
| מחלים/בריא | בריא |
| ז״ל | ז״ל |

### סטטוס זוגי → marital_status:
| באקסל | במערכת |
|--------|---------|
| נשואים | נשואים |
| גרושים | גרושים |
| פרודים | פרודים |
| רווק/ה | אין |
| חד הורי | אין |
| ידועים בציבור | נשואים |
| אלמנה | אין |
| אם יחידנית | אין |

### מצב חונכות → tutoring_status:
| באקסל | במערכת | הערה |
|--------|---------|------|
| לא רלוונטי | לא_רלוונטי | |
| לא רוצים | לא_רוצים | |
| למצוא חונך | למצוא_חונך | |
| יש חונך | יש_חונך | |
| להוסיף פרטים | למצוא_חונך | לעדכן אחרי |
| מחכה לפרטים | למצוא_חונך | לעדכן אחרי |
| לעדכן סטטוס | למצוא_חונך | לעדכן אחרי |

**שימו לב:** הערכים במערכת הם **עם קו תחתון** (למשל: `לא_רלוונטי`)

---

## 🏥 התאמת בתי חולים

בתי החולים באקסל צריכים להתאים לרשימה במערכת:

| באקסל | במערכת |
|--------|---------|
| שניידר | שניידר פתח תקווה |
| תל השומר | שיבא תל השומר |
| תל השומר (שיבא) | שיבא תל השומר |
| שיבא | שיבא תל השומר |
| שיבא תל השומר | שיבא תל השומר |
| איכילוב | איכילוב תל אביב |
| רמבם | רמבם חיפה |
| רמב״ם | רמבם חיפה |
| הדסה עין כרם | הדסה עין כרם ירושלים |
| הדסה | הדסה עין כרם ירושלים |
| סורוקה | סורוקה באר שבע |
| שערי צדק | שערי צדק ירושלים |
| העמק | העמק עפולה |
| בלינסון | בילינסון פתח תקווה |
| דנה | איכילוב תל אביב |
| דנה (איכילוב) | איכילוב תל אביב |

---

## 📝 דוגמה לשורה מתוקנת

**מהאקסל:**
```
שם מלא: נועה אזנקוט
ת.ז: 2174500.0
טלפון: 0523613465
עיר: רחובות
בית חולים: ספרא שיבא תל השומר
מין: בת
סטטוס: אחזקה
סטטוס זוגי: נשואים
מצב חונכות: לא רוצים
```

**לטופס המערכת:**
```
ת.ז ילד: 002174500 (הוספנו אפסים ל-9 ספרות)
שם פרטי: נועה
שם משפחה: אזנקוט
מין: נקבה
טלפון ילד: 0523613465
עיר: רחובות
בית חולים: שיבא תל השומר
סטטוס: אחזקה
מצב משפחתי: נשואים
מצב חונכות: לא_רוצים
```

---

## ✅ רשימת תיקונים לפני הכנסה

### שלב 1: תיקון תעודות זהות
- [ ] וודאו שכל ת.ז היא 9 ספרות
- [ ] הוסיפו אפסים בהתחלה לת.ז קצרות
- [ ] הסירו נקודות עשרוניות (`.0`)

### שלב 2: תיקון מספרי טלפון
- [ ] הוסיפו 0 בהתחלה לטלפונים עם 9 ספרות
- [ ] הסירו תווים מיוחדים (-, רווחים, וכו')
- [ ] רשומות ללא טלפון - השתמשו בטלפון הורה או "0000000000"

### שלב 3: התאמת שמות בתי חולים
- [ ] החליפו את שמות בתי החולים לפי הטבלה למעלה
- [ ] וודאו שהשם מתאים בדיוק לרשימה במערכת

### שלב 4: פיצול שמות
- [ ] פצלו את "שם מלא" לשם פרטי ושם משפחה
- [ ] הסירו רווחים מיותרים

### שלב 5: המרת ערכים
- [ ] המירו סטטוס זוגי לערכים של המערכת
- [ ] המירו מצב חונכות לערכים עם קו תחתון
- [ ] המירו סטטוס לערכים של המערכת

---

## 📱 שדות חובה במערכת

כדי להכניס משפחה חדשה, **חייבים** למלא:

1. **ת.ז ילד** - 9 ספרות בדיוק
2. **שם פרטי** - בעברית
3. **שם משפחה** - בעברית
4. **מין** - זכר/נקבה
5. **עיר** - מהרשימה הקבועה
6. **רחוב ומספר דירה** - טקסט חופשי
7. **טלפון ילד** - 10 ספרות
8. **בית חולים מטפל** - מהרשימה הקבועה
9. **תאריך לידה** - גיל 0-30
10. **מצב משפחתי** - נשואים/גרושים/פרודים/אין
11. **מספר אחים** - מספר שלם
12. **מצב חונכות** - מהרשימה הקבועה
13. **פרטים לחונכות** - טקסט (אפשר "לא רלוונטי")
14. **סטטוס** - טיפולים/מעקבים/אחזקה/בריא/ז״ל

---

## 🔄 תהליך הכנסה מומלץ

### אפשרות 1: הכנסה ידנית (מומלץ לכמויות קטנות)
1. פתחו את דף "משפחות" במערכת
2. לחצו על "הוסף משפחה"
3. העתיקו את הנתונים מהאקסל לטופס
4. וודאו שכל השדות ממולאים נכון
5. לחצו "שמור"
6. חזרו על התהליך לכל משפחה

### אפשרות 2: סקריפט ייבוא (דורש פיתוח)
אם יש מאות משפחות להכניס, ניתן לפתח סקריפט שייבא את הנתונים ישירות לבסיס הנתונים. **זה דורש פיתוח נוסף ואישור.**

---

## ❓ שאלות לבירור

1. **מה לעשות עם בוגרים?**
   - יש 146 רשומות מסוג "בוגר/ת"
   - יש טבלת "בוגרים" נפרדת במערכת?
   - או להכניס לטבלת משפחות רגילה?

2. **מה לעשות עם משפחות ללא טלפון?**
   - יש 223 רשומות ללא טלפון ילד
   - האם להשתמש בטלפון הורה?
   - האם להשאיר ריק?

3. **סדר עדיפויות ייבוא?**
   - האם להתחיל עם רשומות תקינות (183)?
   - האם לתקן את הכל קודם?

---

## 📞 סיכום והמשך

### מה צריך לעשות עכשיו:

1. ✅ **תיקון הנתונים באקסל** - לפי ההוראות למעלה
2. ✅ **השלמת נתונים חסרים** - ת.ז, טלפון, בית חולים
3. ✅ **המרת ערכים** - לפורמט המערכת
4. ⏳ **הכנסה ידנית** - משפחה אחרי משפחה דרך הטופס

---

**נכתב עבור עמותת "חיוך של ילד"**
